import type { SceneScript } from '../types/scene-script';

/**
 * Hardcoded fallback scripts ‚Äî used as Tier 2 when API fails.
 * These guarantee the demo NEVER shows an error screen.
 * Each follows the 3-act structure with emotes and effects.
 */
export const FALLBACK_SCRIPTS: Record<string, SceneScript> = {
  'skeleton-birthday': {
    success_level: 'PARTIAL_SUCCESS',
    narration: "The skeleton tries to set up a party but nobody knows what to do!",
    actions: [
      { type: 'spawn', target: 'skeleton_warrior', position: 'center' },
      { type: 'emote', target: 'skeleton_warrior', emoji: 'üéÇ', text: "It's my birthday!" },
      { type: 'spawn', target: 'knight', position: 'off-left', delay_ms: 600 },
      { type: 'move', target: 'knight', to: 'left', style: 'bounce', delay_ms: 200 },
      { type: 'emote', target: 'knight', emoji: 'üéÅ', text: "I brought a gift!", delay_ms: 400 },
      { type: 'spawn', target: 'table_long', position: 'center', delay_ms: 300 },
      { type: 'spawn', target: 'clown', position: 'off-right', delay_ms: 500 },
      { type: 'move', target: 'clown', to: 'right', style: 'bounce', delay_ms: 200 },
      { type: 'emote', target: 'clown', emoji: 'ü§°', text: "Party time?", delay_ms: 300 },
      { type: 'react', effect: 'question-marks', position: 'center', delay_ms: 400 },
    ],
    prompt_feedback: "The party is starting! Tell the characters what to do ‚Äî who brings the cake? Who dances?",
    guide_hint: 'Try naming a character and describing exactly what they do!',
    prompt_analysis: { has_character: false, has_action: false, has_sequence: false, has_detail: false, has_multi_char: false, has_environment: false },
  },

  'knight-space': {
    success_level: 'PARTIAL_SUCCESS',
    narration: "The robots float around the space station bumping into everything!",
    actions: [
      { type: 'spawn', target: 'robot', position: 'off-left' },
      { type: 'move', target: 'robot', to: 'left', style: 'float', delay_ms: 300 },
      { type: 'emote', target: 'robot', emoji: 'ü§ñ', text: "Systems offline!", delay_ms: 400 },
      { type: 'spawn', target: 'space_ranger', position: 'off-right', delay_ms: 600 },
      { type: 'move', target: 'space_ranger', to: 'right', style: 'float', delay_ms: 200 },
      { type: 'emote', target: 'space_ranger', emoji: 'üò∞', text: "We're drifting!", delay_ms: 400 },
      { type: 'spawn', target: 'engineer', position: 'off-left', delay_ms: 500 },
      { type: 'move', target: 'engineer', to: 'center', style: 'float', delay_ms: 200 },
      { type: 'animate', target: 'engineer', anim: 'Interact', delay_ms: 300 },
      { type: 'react', effect: 'stars-spin', position: 'center', delay_ms: 400 },
    ],
    prompt_feedback: "The station needs fixing! Tell the space ranger or engineer what to repair and how.",
    guide_hint: 'Try telling each character a specific job ‚Äî like "the engineer fixes the solar panel"!',
    prompt_analysis: { has_character: false, has_action: false, has_sequence: false, has_detail: false, has_multi_char: false, has_environment: false },
  },

  'barbarian-school': {
    success_level: 'PARTIAL_SUCCESS',
    narration: "The monsters arrive at the playground but can't agree on what to play!",
    actions: [
      { type: 'spawn', target: 'barbarian', position: 'off-left' },
      { type: 'move', target: 'barbarian', to: 'left', style: 'bounce', delay_ms: 200 },
      { type: 'emote', target: 'barbarian', emoji: 'üí™', text: "Let's wrestle!", delay_ms: 400 },
      { type: 'spawn', target: 'clown', position: 'off-right', delay_ms: 600 },
      { type: 'move', target: 'clown', to: 'right', style: 'bounce', delay_ms: 200 },
      { type: 'emote', target: 'clown', emoji: 'üé™', text: "No, let's juggle!", delay_ms: 400 },
      { type: 'spawn', target: 'ninja', position: 'off-left', delay_ms: 500 },
      { type: 'move', target: 'ninja', to: 'center', style: 'linear', delay_ms: 200 },
      { type: 'emote', target: 'ninja', emoji: 'ü§´', text: "Let's sneak...", delay_ms: 400 },
      { type: 'react', effect: 'question-marks', position: 'center', delay_ms: 300 },
    ],
    prompt_feedback: "The playground is waiting! Tell the monsters what game to play and who does what.",
    guide_hint: 'Try saying something like "the barbarian goes down the slide while the clown juggles"!',
    prompt_analysis: { has_character: false, has_action: false, has_sequence: false, has_detail: false, has_multi_char: false, has_environment: false },
  },

  'skeleton-pizza': {
    success_level: 'PARTIAL_SUCCESS',
    narration: "The kitchen is chaos and nobody knows what order to make!",
    actions: [
      { type: 'spawn', target: 'skeleton_warrior', position: 'center' },
      { type: 'emote', target: 'skeleton_warrior', emoji: 'üìã', text: "What's the order?!", delay_ms: 400 },
      { type: 'spawn', target: 'clown', position: 'off-left', delay_ms: 600 },
      { type: 'move', target: 'clown', to: 'left', style: 'bounce', delay_ms: 200 },
      { type: 'emote', target: 'clown', emoji: 'üçï', text: "I'll make pizza!", delay_ms: 400 },
      { type: 'spawn', target: 'oven', position: 'right', delay_ms: 300 },
      { type: 'spawn', target: 'superhero', position: 'off-right', delay_ms: 500 },
      { type: 'move', target: 'superhero', to: 'right', style: 'bounce', delay_ms: 200 },
      { type: 'emote', target: 'superhero', emoji: 'üî•', text: "The oven's on fire!", delay_ms: 400 },
      { type: 'react', effect: 'fire-sneeze', position: 'right', delay_ms: 300 },
    ],
    prompt_feedback: "The kitchen needs a chef! Tell the characters who cooks what and how.",
    guide_hint: 'Try describing who makes the pizza and what toppings they put on it!',
    prompt_analysis: { has_character: false, has_action: false, has_sequence: false, has_detail: false, has_multi_char: false, has_environment: false },
  },

  'adventurers-picnic': {
    success_level: 'PARTIAL_SUCCESS',
    narration: "The adventurers reach the clearing but the magic fizzles before they can figure it out!",
    actions: [
      { type: 'spawn', target: 'ranger', position: 'off-left' },
      { type: 'move', target: 'ranger', to: 'left', style: 'linear', delay_ms: 200 },
      { type: 'emote', target: 'ranger', emoji: 'üëÄ', text: "What's that glow?", delay_ms: 400 },
      { type: 'spawn', target: 'druid', position: 'off-right', delay_ms: 600 },
      { type: 'move', target: 'druid', to: 'right', style: 'linear', delay_ms: 200 },
      { type: 'emote', target: 'druid', emoji: '‚ú®', text: "I sense magic!", delay_ms: 400 },
      { type: 'react', effect: 'sparkle-magic', position: 'center', delay_ms: 500 },
      { type: 'spawn', target: 'barbarian', position: 'off-left', delay_ms: 500 },
      { type: 'move', target: 'barbarian', to: 'center', style: 'bounce', delay_ms: 200 },
      { type: 'emote', target: 'barbarian', emoji: 'ü§∑', text: "Can I eat it?", delay_ms: 400 },
    ],
    prompt_feedback: "The forest is full of mysteries! Describe what magical thing happens and how the adventurers react.",
    guide_hint: 'Try describing what the adventurers discover and how they react to it!',
    prompt_analysis: { has_character: false, has_action: false, has_sequence: false, has_detail: false, has_multi_char: false, has_environment: false },
  },

  'dungeon-concert': {
    success_level: 'PARTIAL_SUCCESS',
    narration: "The dungeon door creaks open but the team can't agree on a plan!",
    actions: [
      { type: 'spawn', target: 'chest', position: 'center' },
      { type: 'spawn', target: 'knight', position: 'off-left', delay_ms: 400 },
      { type: 'move', target: 'knight', to: 'left', style: 'linear', delay_ms: 200 },
      { type: 'emote', target: 'knight', emoji: '‚öîÔ∏è', text: "I'll smash it open!", delay_ms: 400 },
      { type: 'spawn', target: 'rogue', position: 'off-right', delay_ms: 600 },
      { type: 'move', target: 'rogue', to: 'right', style: 'linear', delay_ms: 200 },
      { type: 'emote', target: 'rogue', emoji: 'üîë', text: "No! Let me pick it!", delay_ms: 400 },
      { type: 'spawn', target: 'mage', position: 'off-left', delay_ms: 500 },
      { type: 'move', target: 'mage', to: 'center', style: 'linear', delay_ms: 200 },
      { type: 'emote', target: 'mage', emoji: 'ü§î', text: "What if it's trapped?", delay_ms: 400 },
    ],
    prompt_feedback: "You need an escape plan! Tell each character what to do ‚Äî who sneaks, who fights, who casts spells?",
    guide_hint: 'Try telling the rogue to pick the lock or the mage to cast a spell!',
    prompt_analysis: { has_character: false, has_action: false, has_sequence: false, has_detail: false, has_multi_char: false, has_environment: false },
  },

  'free-play': {
    success_level: 'FULL_SUCCESS',
    narration: "The Creative Playground erupts into the wildest party ever!",
    actions: [
      { type: 'spawn', target: 'knight', position: 'off-left' },
      { type: 'move', target: 'knight', to: 'left', style: 'bounce', delay_ms: 200 },
      { type: 'emote', target: 'knight', emoji: 'üéâ', text: "Party time!", delay_ms: 400 },
      { type: 'spawn', target: 'skeleton_warrior', position: 'off-right', delay_ms: 600 },
      { type: 'move', target: 'skeleton_warrior', to: 'right', style: 'bounce', delay_ms: 200 },
      { type: 'emote', target: 'skeleton_warrior', emoji: 'üíÄ', text: "Let's dance!", delay_ms: 400 },
      { type: 'spawn', target: 'mage', position: 'off-left', delay_ms: 500 },
      { type: 'move', target: 'mage', to: 'center', style: 'arc', delay_ms: 200 },
      { type: 'animate', target: 'mage', anim: 'Ranged_Magic_Spellcasting', delay_ms: 300 },
      { type: 'emote', target: 'mage', emoji: '‚ú®', text: "Fireworks spell!", delay_ms: 400 },
      { type: 'react', effect: 'confetti-burst', position: 'center', delay_ms: 300 },
      { type: 'crowd_react' as any, characters: 'all', anim: 'Cheering', delay_ms: 300 },
    ],
    prompt_feedback: "This is YOUR playground ‚Äî describe any scene you can imagine! Mix any characters, any props, anything goes!",
    guide_hint: 'Try combining characters from different zones ‚Äî like the skeleton and the space ranger!',
    prompt_analysis: { has_character: false, has_action: false, has_sequence: false, has_detail: false, has_multi_char: false, has_environment: false },
  },

  'mage-kitchen': {
    success_level: 'PARTIAL_SUCCESS',
    narration: "The mage zaps the stove but the kitchen starts fighting back!",
    actions: [
      { type: 'spawn', target: 'mage', position: 'off-left' },
      { type: 'move', target: 'mage', to: 'left', style: 'linear', delay_ms: 200 },
      { type: 'emote', target: 'mage', emoji: 'ü™Ñ', text: "Kitchen, behave!", delay_ms: 400 },
      { type: 'spawn', target: 'pot', position: 'center', delay_ms: 500 },
      { type: 'animate', target: 'mage', anim: 'Ranged_Magic_Spellcasting', delay_ms: 300 },
      { type: 'react', effect: 'sparkle-magic', position: 'center', delay_ms: 400 },
      { type: 'spawn', target: 'witch', position: 'off-right', delay_ms: 600 },
      { type: 'move', target: 'witch', to: 'right', style: 'bounce', delay_ms: 200 },
      { type: 'emote', target: 'witch', emoji: 'üò±', text: "The pot is alive!", delay_ms: 400 },
      { type: 'react', effect: 'explosion-cartoon', position: 'center', delay_ms: 300 },
    ],
    prompt_feedback: "The kitchen is alive! Describe which spells the mage uses and what happens to each item.",
    guide_hint: 'Try describing a specific spell the mage uses and what happens to each kitchen item!',
    prompt_analysis: { has_character: false, has_action: false, has_sequence: false, has_detail: false, has_multi_char: false, has_environment: false },
  },
};
